require 'data/npc/lib/NPC'

local zirella = NPC({'hi','hello'}, 'Oh, welcome back, dear  player ! Are you here for a little chat? Just use the dark blue {keywords} again to choose a topic.', 'Good bye  player , may Uman bless you!')

function onCreatureAppear(...)      zirella:onCreatureAppear(...)      end
function onCreatureDisappear(...)   zirella:onCreatureDisappear(...)   end
function onCreatureSay(...)         zirella:onCreatureSay(...)         end
function onThink(...)               zirella:onThink(...)               end
function onCreatureMove(...)        zirella:onCreatureMove(...)        end
function onPlayerCloseChannel(...)  zirella:onPlayerCloseChannel(...)  end
function onPlayerEndTrade(...)      zirella:onPlayerEndTrade(...)      end

local engine = zirella.dialogEngine

engine.all.connect('keywords', engine.State('Right, this was a keyword. But actually there are more interesting topics to talk about.'))
engine.all.connect('time', engine.State('An old woman like me has all the {time} in the world.'))
engine.all.connect('rookgaard', engine.State('We are currently south of the village of {Rookgaard}, just follow the path to the east. Once you are there, you will meet many other {citizens}.'))
engine.all.connect('main', engine.State('The {main} continent is so much bigger than {Rookgaard}. You can travel there once you are level 8 and have chosen a {vocation}.'))
engine.all.connect('vocation', engine.State('The Tibian {vocation}s are {knight}, {paladin}, {sorcerer} and {druid}, each of them has its own specialities.'))
engine.all.connect('knight', engine.State('{Knight}s are strong melee fighters. They usually use weapons such as swords, clubs or axes.'))
engine.all.connect('druid', engine.State('{Druid}s are nature magic users, specialised in earth, ice and healing.'))
engine.all.connect('paladin', engine.State('{Paladin}s are distance fighters and holy magic users. They outrun their enemies and shoot them with arrows or bolts.'))
engine.all.connect('sorcerer', engine.State('{Sorcerer}s are elemental magic users, specialised in fire, energy and death magic.'))
engine.all.connect('tibia', engine.State('{Tibia} is a huge world with many {cities} - most of them threatened by {monsters}. If you help us fighting them, you will earn {experience} and grow into a strong {warrior}.'))
engine.all.connect('cities', engine.State('There are many {cities} on the {main} continent, much bigger than our little village here. You should visit all of them!'))
engine.all.connect('monsters', engine.State('Here on {Rookgaard}, we are lucky that the {monsters} threatening our village are rather weak. I wouldn\'t want to have the {dragons} and {demons} of the {main} continent here!'))
engine.all.connect('dragons', engine.State('You\'ll never forget your first dragon. That is true even after all those years. Fierce beasts they are!'))
engine.all.connect('demons', engine.State('There are numerous different {demons} all over {Tibia}. They mostly hide deep in {dungeons}, but sometimes they dare entering the human realm.'))
engine.all.connect('citizens', engine.State('Most of the {citizens} are {merchants}. We have also two {guards} and a {healer}, and a {teacher} in our academy.'))
engine.all.connect('zirella', engine.State('Everyone in {Tibia} has a job, and I\'m a fisherman! Well - I used to be a famous pirate, to be honest, but all those adventures were too much for me.'))
engine.all.connect('stories', engine.State('Hmm hmm, I could tell you some {stories} about {Thais} and the old days..'))
engine.all.connect('merchants', engine.State('We have a weapon smith called {Obi}, {Dixi} is selling armors and {Al Dee} is offering general tools. Also, you can buy potions from {Lily}. I think those are the most important people to {trade} with.'))
engine.all.connect('guards', engine.State('The bridge {guards} {Dallheim} and {Zerbrus} can tell you which {monsters} are suitable for your level and where to find them.'))
engine.all.connect('healer', engine.State('Our {healer} is called {Cipfried}. He {guards} the temple.'))
engine.all.connect('teacher', engine.State('The {teacher} of the academy is called {Seymour}. The academy is just north of the temple.'))
engine.all.connect('thais', engine.State({'{Thais} was the first city in {Tibia}, back then it was even called \'Tibia City\'. There were {dragons} just outside the gates! ...','In the past years, brave adventurers have pushed them back into the {dungeons}, though. Also, there was this  great battle with {Ferumbras}! Those were the days.'}))
engine.all.connect('ferumbras', engine.State({'He is a mighty and evil wizard. Back then, all Tibians stuck together and managed to defeat him. I heard he fled and found a refuge to recover. ...','There is a citadel on one of the Tibian islands which he uses to regain his power. Now and then, brave Tibians invade and weaken him again.'}))
engine.all.connect('trade', engine.State('Oh sorry, I don\'t {trade}. But if you meet other {citizens}, it can\'t hurt to ask them for a {trade}! If they have offers or buy your stuff, they\'ll tell you.'))
engine.all.connect('dungeons', engine.State('There is a huge cave system under {Tibia}. Even {Rookgaard} has many underground {dungeons}. The bridge {guards} know all about them.'))
engine.all.connect('obi', engine.State('{Obi} is a skilled smith. If you need weapons, you can buy them at his shop.'))
engine.all.connect('dixi', engine.State('She\'s {Obi}\'s granddaughter and deals with armors and shields, just upstairs from {Obi}\'s shop.'))
engine.all.connect('al dee', engine.State('{Al Dee} sells tools such as torches, ropes and shovels. You will learn about them soon!'))
engine.all.connect('lily', engine.State('{Lily}\'s shop is just behind the bridge that leads to the village. She sells potions which will refill your health or cure poison.'))
engine.all.connect({'dallheim','zerbrus'}, engine.State('He\'s a great {warrior}. He can also tell you much about {monsters} and {dungeons} on this island.'))
engine.all.connect('cipfried', engine.State('Visiting {Cipfried} is a good idea if you are badly injured or poisoned. Just ask him for a heal.'))
engine.all.connect('seymour', engine.State('{Seymour} is a {teacher} running the academy. He has many important information about {Tibia}.'))
engine.all.connect('experience', engine.State('Earning {experience} and gaining levels will make you stronger. It\'s all about power in {Tibia}!'))
engine.all.connect('warrior', engine.State('Well, everybody is a \'warrior\' in general. You can choose between four {vocation}s once you are level 8.'))
engine.all.connect('oracle', engine.State('Oh, you\'re a bit young to hear about the {oracle}. Be patient, you\'ll learn everything in {time}.'))
engine.all.connect('hints', engine.State({{'There are many ways to gather food. Many creatures drop food but you can also pick blueberries or bake your own bread. If you have a fishing rod and worms in your inventory, you can also try to catch a fish.'},{'Send private messages to other players by right-clicking on the player or the player\'s name and select \'Message to ....\'. You can also open a \'private message channel\' and type in the name of the player.'},{'The leader of a party has the option to distribute gathered {experience} among all players in the party. If you are the leader, right-click on yourself and select \'Enable Shared {Experience}\'.'},{'You can form a party by right-clicking on a player and selecting \'Invite to Party\'. The party leader can also enable \'Shared {Experience}\' by right-clicking on him- or herself.'},{'If you already know where you want to go, click on the automap and your character will walk there automatically if the location is reachable and not too far away.'},{'Baking bread is rather complex. First of all you need a scythe to harvest wheat. Then you use the wheat with a millstone to get flour. ...','This can be be used on water to get dough, which can be used on an oven to bake bread. Use milk instead of water to get cake dough.'},{'You can assign spells, the use of items, or random text to \'hotkeys\'. You find them under \'Options\'.'},{'To open or close skills, battle or VIP list, click on the corresponding button to the right.'},{'Be careful when you approach three or more {monsters} because you only can block the attacks of two. In such a situation even a few rats can do severe damage or even kill you.'},{'Quest containers can be recognised easily. They don\'t open up regularly but display a message \'You have found ....\'. They can only be opened once.'},{'Always eat as much food as possible. This way, you\'ll regenerate health points for a longer period of {time}.'},{'If you don\'t know the meaning of an icon on the right side, move the mouse cursor on it and wait a moment.'},{'When you switch to \'Offensive Fighting\', you deal out more damage but you also get hurt more easily.'},{'Always have a look on your health bar. If you see that you do not regenerate health points anymore, eat something.'},{'After you have killed a monster, you have 10 seconds in which the corpse is not moveable and no one else but you can loot it.'},{'The deeper you enter a dungeon, the more dangerous it will be. Approach every dungeon with utmost care or an unexpected creature might kill you. This will result in losing {experience} and skill points.'},{'There is nothing more I can tell you. If you are still in need of some {hints}, I can repeat them for you.'},{'Use the shortcuts \'SHIFT\' to look, \'CTRL\' for use and \'ALT\' for attack when clicking on an object or player.'},{'Many creatures try to run away from you. Select \'Chase Opponent\' to follow them.'},{'Stairs, ladders and dungeon entrances are marked as yellow dots on the automap.'},{'Due to the perspective, some objects in {Tibia} are not located at the spot they seem to appear (ladders, windows, lamps). Try clicking on the floor tile the object would lie on.'},{'\'Capacity\' restricts the amount of things you can carry with you. It raises with each level.'},{'Dying hurts! Better run away than risk your life. You are going to lose {experience} and skill points when you die.'},{'You can found a party with your friends by right-clicking on a player and selecting \'Invite to Party\'. If you are invited to a party, right-click on yourself and select \'Join Party\'.'},{'When you are on low health and need to run away from a monster, switch to \'Defensive Fighting\' and the monster will hit you less severely.'},{'Better run away than risk to die. You\'ll lose {experience} and skill points each {time} you die.'},{'You can get food by killing animals or {monsters}. You can also pick blueberries or bake your own bread. If you are too lazy or own too much money, you can also buy food.'},{'Only found parties with people you trust. You can attack people in your party without getting a skull. This is helpful for training your skills, but can be abused to kill people without having to fear negative consequences.'},{'You can also follow other players. Just right-click on the player and select \'Follow\'.'},{'If you want to {trade} an item with another player, right-click on the item and select \'Trade with ...\', then click on the player with whom you want to {trade}.'}}))

engine.all.to('bye', engine.State('Good bye  player , may Uman bless you!'))